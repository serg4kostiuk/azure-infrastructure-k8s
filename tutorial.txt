1. az login
2. az group create --name myrg --location West Europe 
 #you can change name of k8s in k8s.tf
3. terraform init 
4. terraform plan 
5. terraform apply
6. az aks install-cli
7. az aks get-credentials --resource-group myrg --name myk8s
8. kubectl get nodes
9. kubectl apply -f second.yml
10. kubectl get service web2 --watch

NAME   TYPE           CLUSTER-IP    EXTERNAL-IP     PORT(S)        AGE
web2   LoadBalancer   10.0.59.124   40.121.48.150   80:30722/TCP   3h44m

11. kubectl get pods --watch

NAME                   READY   STATUS    RESTARTS   AGE
web2-8857c9f66-n9pfj   1/1     Running   0          3h47m











12. kubectl exec -it web2-....... -- /bin/bash
13.  vi /var/www/html/wp-config.php on pod change parameters for db connection (password host)
14. Must work 
    


1. az login
2. terraform init 
3. terraform plan 
4. terraform apply -auto-approve
az aks install-cli
az aks get-credentials --resource-group myrg --name myk8s
kubectl get nodes
9. kubectl apply -f second.yml
kubectl get service web2 --watch

kubectl exec -it web2-8857c9f66-9pnt9 -- /bin/bash
kubectl exec -it web-7b48ff7558-zpbg6 -- /bin/bash


#ping remote port
nc -vz 13.68.128.183 50000
wget 13.68.128.183:50000
telnet 13.68.128.183 50000
nping -p 50000 13.68.128.183


#https://linuxconfig.org/how-to-install-kubernetes-on-ubuntu-18-04-bionic-beaver-linux

curl -s https://packages.cloud.google.com/apt/doc/apt-key.gpg | sudo apt-key add
sudo apt-add-repository "deb http://apt.kubernetes.io/ kubernetes-xenial main"
sudo apt install kubeadm 


az login
az account set --subscription "mySubscriptionID"
az group create --name "testKubGroup" --location "westus"
az ad sp create-for-rbac --role="Contributor" --scopes="/subscriptions/97177a02-71fc-42bc-8a83-1a00bd462bf2/resourceGroups/testKubGroup"

kubectl create -f mysql.yaml





kubectl create configmap prometheus-cm --from-file=prometheus.yml -o yaml --dry-run | kubectl apply -f -


 sudo docker build -t grafana:custom -f custom-plugins .

sudo docker run \
  -d \
  -p 3000:3000 \
  --name=grafana \
  -e "GF_SECURITY_ADMIN_PASSWORD=123qwe" \
  -e "GF_SERVER_PROTOCOL=http" \
  -e "GF_SERVER_DOMAIN=demo03-grafana" \
  -e "GF_SERVER_HTTP_PORT=3000" \
  -e "GF_SERVER_ROOT_URL=%(protocol)s://%(domain)s:%(http_port)s/" \
  -e "GF_AUTH.GENERIC_OAUTH_enabled=true" \
  -e "GF_AUTH.GENERIC_OAUTH_name=Azure AD" \
  -e "GF_AUTH.GENERIC_OAUTH_ALLOW_SIGN_UP=true" \
  -e "GF_AUTH.GENERIC_OAUTH_client_id = https://casablancaukrainegmail.onmicrosoft.com/6bea3a89-cb6f-42ee-8dbd-4632b8810416" \
  -e "GF_AUTH.GENERIC_OAUTH_client_secret = iJkxDgnLippXHVnkNy3AZhRAzSWFeu0v8obU6iDCoWA=" \
  -e "GF_AUTH.GENERIC_OAUTH_scopes = openid email name" \
  -e "GF_AUTH.GENERIC_OAUTH_auth_url = https://login.microsoftonline.com/e241b4a0-b3ae-4690-8721-5601a0c8314b/oauth2/authorize" \
  -e "GF_AUTH.GENERIC_OAUTH_token_url = https://login.microsoftonline.com/e241b4a0-b3ae-4690-8721-5601a0c8314b/oauth2/token" \
  -v grafana-storage:/var/lib/grafana \
  grafana:custom


[auth.generic_oauth]
enabled = true
name = Azure AD
allow_sign_up = true
client_id = https://casablancaukrainegmail.onmicrosoft.com/6bea3a89-cb6f-42ee-8dbd-4632b8810416
client_secret = iJkxDgnLippXHVnkNy3AZhRAzSWFeu0v8obU6iDCoWA=
scopes = openid email name
auth_url = https://login.microsoftonline.com/e241b4a0-b3ae-4690-8721-5601a0c8314b/oauth2/authorize
token_url = https://login.microsoftonline.com/e241b4a0-b3ae-4690-8721-5601a0c8314b/oauth2/token


curl -X POST -H 'Content-type: applibhyqsddvggggggggggggggggggrbv kkcation/json' --data '{"text":"You, bastards!"}' https://hooks.slack.com/services/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ok% 



https://itnext.io/kubernetes-monitoring-with-prometheus-in-15-minutes-8e54d1de2e13



helm install coreos/prometheus-operator --name prometheus-operator --namespace monitoring --set rbacEnable=false

helm install coreos/kube-prometheus --name kube-prometheus --set global.rbacEnable=true --namespace monitoring --set rbacEnable=false

kubectl get pods  -n monitoring --watch
