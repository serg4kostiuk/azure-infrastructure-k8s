FROM centos:centos7

WORKDIR /dockertest

RUN rpm --import /etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-7
RUN yum -y update && yum -y install wget nano httpd php-mysql php-client php php-gd php-cli php-soap php-fileinfo && rm -rf /var/lib/apt/lists/*
ADD http://wordpress.org/latest.tar.gz /var/www/
RUN cd /var/www/ && tar xzvf latest.tar.gz
RUN mv /var/www/wordpress/* /var/www/html/
COPY permissions.sh /var/www/permissions.sh
RUN cd /var/www/ && chmod +x permissions.sh && ./permissions.sh
EXPOSE 80
CMD ["httpd", "-D", "FOREGROUND", "-e", "info"]
